<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Farm Parameters - Kissan Sarthi</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/crop-selection.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script type="text/javascript" src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
    <script src="js/translate.js"></script>
</head>
<body>
    <header>
        <nav>
            <div class="nav-brand">
                <h1>‡§ï‡§ø‡§∏‡§æ‡§® ‡§∏‡§æ‡§∞‡§•‡•Ä</h1>
            </div>
            <div class="nav-links">
                <a href="index.html">Home</a>
                <a href="details.html">Details</a>
                <a href="parameters.html" class="active">Parameters</a>
                <a href="dashboard.html">Dashboard</a>

            </div>
        </nav>
        <div id="google_translate_element"></div>
    </header>

    <main>
        <section class="parameters-section">
            <h1>Farm Parameters</h1>
            <form id="parameterForm" class="parameter-form">
                <section class="parameter-section">
                    <h2>Crop Selection</h2>
                    <div class="parameter-cards">
                        <div class="parameter-card number-input-container">
                            <label>Total Crop Area (acres)</label>
                            <div class="number-selection">
                                <div class="number-display">0</div>
                                <div class="number-control">
                                    <button type="button" class="number-btn increment">+</button>
                                    <button type="button" class="number-btn decrement">-</button>
                                </div>
                            </div>
                            <input type="hidden" id="cropArea" name="cropArea" value="0" required>
                        </div>
                        <div class="parameter-card crop-selection-container">
                            <label>Select Crops (click to select multiple)</label>
                            <div class="crop-grid">
                                <div class="crop-item" data-value="wheat">
                                    <div class="crop-icon">üåæ</div>
                                    <span>Wheat</span>
                                </div>
                                <div class="crop-item" data-value="rice">
                                    <div class="crop-icon">üçö</div>
                                    <span>Rice</span>
                                </div>
                                <div class="crop-item" data-value="corn">
                                    <div class="crop-icon">üåΩ</div>
                                    <span>Corn</span>
                                </div>
                                <div class="crop-item" data-value="sugarcane">
                                    <div class="crop-icon">üçØ</div>
                                    <span>Sugarcane</span>
                                </div>
                                <div class="crop-item" data-value="cotton">
                                    <div class="crop-icon">‚òÅÔ∏è</div>
                                    <span>Cotton</span>
                                </div>
                                <div class="crop-item" data-value="soybean">
                                    <div class="crop-icon">üå±</div>
                                    <span>Soybean</span>
                                </div>
                                <div class="crop-item" data-value="potato">
                                    <div class="crop-icon">ü•î</div>
                                    <span>Potato</span>
                                </div>
                                <div class="crop-item" data-value="tomato">
                                    <div class="crop-icon">üçÖ</div>
                                    <span>Tomato</span>
                                </div>
                            </div>
                            <input type="hidden" id="selectedCrops" name="selectedCrops" required>
                        </div>
                    </div>
                </section>

                <section class="parameter-section">
                    <h2>Irrigation Methods</h2>
                    <div class="parameter-cards">
                        <div class="parameter-card selection-container">
                            <label>Irrigation Type</label>
                            <div class="selection-grid">
                                <div class="selection-item" data-value="drip">
                                    <div class="selection-icon">üíß</div>
                                    <span>Drip Irrigation</span>
                                </div>
                                <div class="selection-item" data-value="sprinkler">
                                    <div class="selection-icon">üöø</div>
                                    <span>Sprinkler System</span>
                                </div>
                                <div class="selection-item" data-value="flood">
                                    <div class="selection-icon">üåä</div>
                                    <span>Flood Irrigation</span>
                                </div>
                            </div>
                            <input type="hidden" id="irrigationType" name="irrigationType" required>
                        </div>
                        <div class="parameter-card selection-container">
                            <label>Water Source</label>
                            <div class="selection-grid">
                                <div class="selection-item" data-value="well">
                                    <div class="selection-icon">‚õ≤Ô∏è</div>
                                    <span>Well</span>
                                </div>
                                <div class="selection-item" data-value="canal">
                                    <div class="selection-icon">üõ£Ô∏è</div>
                                    <span>Canal</span>
                                </div>
                                <div class="selection-item" data-value="river">
                                    <div class="selection-icon">üåä</div>
                                    <span>River</span>
                                </div>
                                <div class="selection-item" data-value="rain">
                                    <div class="selection-icon">üåßÔ∏è</div>
                                    <span>Rain-fed</span>
                                </div>
                            </div>
                            <input type="hidden" id="waterSource" name="waterSource" required>
                        </div>
                    </div>
                </section>

                <section class="parameter-section">
                    <h2>Growth Enhancement</h2>
                    <div class="parameter-cards">
                        <div class="parameter-card selection-container">
                            <label>Fertilizer Type</label>
                            <div class="selection-grid">
                                <div class="selection-item" data-value="organic">
                                    <div class="selection-icon">üå±</div>
                                    <span>Organic</span>
                                </div>
                                <div class="selection-item" data-value="chemical">
                                    <div class="selection-icon">üß™</div>
                                    <span>Chemical</span>
                                </div>
                                <div class="selection-item" data-value="mixed">
                                    <div class="selection-icon">üß¨</div>
                                    <span>Mixed</span>
                                </div>
                            </div>
                            <input type="hidden" id="fertilizerType" name="fertilizerType" required>
                        </div>
                        <div class="parameter-card selection-container">
                            <label>Pest Control Method</label>
                            <div class="selection-grid">
                                <div class="selection-item" data-value="organic">
                                    <div class="selection-icon">üåø</div>
                                    <span>Organic</span>
                                </div>
                                <div class="selection-item" data-value="chemical">
                                    <div class="selection-icon">üîÆ</div>
                                    <span>Chemical</span>
                                </div>
                                <div class="selection-item" data-value="biological">
                                    <div class="selection-icon">ü™≤</div>
                                    <span>Biological</span>
                                </div>
                            </div>
                            <input type="hidden" id="pestControl" name="pestControl" required>
                        </div>
                    </div>
                </section>

                <section class="parameter-section">
                    <h2>Market Analysis</h2>
                    <div class="parameter-cards">
                        <div class="parameter-card number-input-container">
                            <label>Target Price (‚Çπ/quintal)</label>
                            <div class="number-selection">
                                <div class="number-display">0</div>
                                <div class="number-control">
                                    <button type="button" class="number-btn increment">+</button>
                                    <button type="button" class="number-btn decrement">-</button>
                                </div>
                            </div>
                            <input type="hidden" id="targetPrice" name="targetPrice" value="0" required>
                        </div>
                        <div class="parameter-card number-input-container">
                            <label>Distance to Market (km)</label>
                            <div class="number-selection">
                                <div class="number-display">0</div>
                                <div class="number-control">
                                    <button type="button" class="number-btn increment">+</button>
                                    <button type="button" class="number-btn decrement">-</button>
                                </div>
                            </div>
                            <input type="hidden" id="marketDistance" name="marketDistance" value="0" required>
                        </div>
                    </div>
                </section>

                <section class="parameter-section">
                    <h2>Farmer Grading</h2>
                    <div class="parameter-cards">
                        <div class="parameter-card selection-container">
                            <label>Soil Type</label>
                            <div class="selection-grid">
                                <div class="selection-item" data-value="sandy">
                                    <div class="selection-icon">üèñÔ∏è</div>
                                    <span>Sandy</span>
                                </div>
                                <div class="selection-item" data-value="clay">
                                    <div class="selection-icon">üß±</div>
                                    <span>Clay</span>
                                </div>
                                <div class="selection-item" data-value="loam">
                                    <div class="selection-icon">üü§</div>
                                    <span>Loam</span>
                                </div>
                            </div>
                            <input type="hidden" id="soilType" name="soilType" required>
                        </div>
                        <div class="parameter-card selection-container">
                            <label>Access to Water/Irrigation</label>
                            <div class="selection-grid">
                                <div class="selection-item" data-value="regular">
                                    <div class="selection-icon">üí¶</div>
                                    <span>Regular</span>
                                </div>
                                <div class="selection-item" data-value="occasional">
                                    <div class="selection-icon">üî∂</div>
                                    <span>Occasional</span>
                                </div>
                                <div class="selection-item" data-value="rainfed">
                                    <div class="selection-icon">‚òîÔ∏è</div>
                                    <span>Rain-fed only</span>
                                </div>
                            </div>
                            <input type="hidden" id="waterAccess" name="waterAccess" required>
                        </div>
                        <div class="parameter-card selection-container">
                            <label>Fertilizer Usage</label>
                            <div class="selection-grid">
                                <div class="selection-item" data-value="organic">
                                    <div class="selection-icon">üåª</div>
                                    <span>Organic</span>
                                </div>
                                <div class="selection-item" data-value="chemical">
                                    <div class="selection-icon">üî¨</div>
                                    <span>Chemical</span>
                                </div>
                                <div class="selection-item" data-value="none">
                                    <div class="selection-icon">‚ùå</div>
                                    <span>None</span>
                                </div>
                            </div>
                            <input type="hidden" id="fertilizerUsage" name="fertilizerUsage" required>
                        </div>
                        <div class="parameter-card selection-container">
                            <label>Pest Management Practice</label>
                            <div class="selection-grid">
                                <div class="selection-item" data-value="organic">
                                    <div class="selection-icon">ü•¶</div>
                                    <span>Organic</span>
                                </div>
                                <div class="selection-item" data-value="chemical">
                                    <div class="selection-icon">üí®</div>
                                    <span>Chemical</span>
                                </div>
                                <div class="selection-item" data-value="none">
                                    <div class="selection-icon">‚õî</div>
                                    <span>None</span>
                                </div>
                            </div>
                            <input type="hidden" id="pestManagement" name="pestManagement" required>
                        </div>
                        <div class="parameter-card selection-container">
                            <label>Crop Rotation Practice</label>
                            <div class="selection-grid">
                                <div class="selection-item" data-value="yes">
                                    <div class="selection-icon">‚ôªÔ∏è</div>
                                    <span>Yes</span>
                                </div>
                                <div class="selection-item" data-value="no">
                                    <div class="selection-icon">‚úñÔ∏è</div>
                                    <span>No</span>
                                </div>
                            </div>
                            <input type="hidden" id="cropRotation" name="cropRotation" required>
                        </div>
                    </div>
                    <div id="gradingResult" class="grading-result" style="display: none;">
                        <div class="badge-container">
                            <div id="badgeIcon" class="badge-icon"></div>
                            <div class="badge-info">
                                <h3 id="badgeTitle"></h3>
                                <p id="badgeDescription"></p>
                            </div>
                        </div>
                    </div>
                </section>

                <div class="form-actions">
                    <button type="submit" class="btn">Save & View Dashboard</button>
                </div>
            </form>
        </section>
    </main>

    <footer>
        <p>&copy; 2024 Kissan Sarthi. All rights reserved.</p>
    </footer>

    <script>
        // Initialize Google Translate
        function googleTranslateElementInit() {
            new google.translate.TranslateElement({
                pageLanguage: 'en',
                includedLanguages: 'en,hi,mr,gu,bn,ta,te,ml,kn,pa,ur',
                layout: google.translate.TranslateElement.InlineLayout.SIMPLE
            }, 'google_translate_element');
        }

        // Check for language preference
        document.addEventListener('DOMContentLoaded', () => {
            const selectedLanguage = localStorage.getItem('selectedLanguage');
            if (!selectedLanguage) {
                window.location.href = 'language.html';
                return;
            }

            // Set the language selector to the saved language
            const languageSelect = document.getElementById('language-select');
            if (languageSelect) {
                languageSelect.value = selectedLanguage;
            }

            // Set Google Translate to the selected language
            if (typeof google !== 'undefined' && google.translate) {
                const select = document.querySelector('.goog-te-combo');
                if (select) {
                    select.value = selectedLanguage;
                    select.dispatchEvent(new Event('change'));
                }
            }
        });

        // Handle language change
        function changeLanguage(lang) {
            localStorage.setItem('selectedLanguage', lang);
            
            // Update Google Translate
            if (typeof google !== 'undefined' && google.translate) {
                const select = document.querySelector('.goog-te-combo');
                if (select) {
                    select.value = lang;
                    select.dispatchEvent(new Event('change'));
                }
            }

            // Add transition effect
            document.body.style.animation = 'fadeOut 0.3s ease-out forwards';
            setTimeout(() => {
                window.location.reload();
            }, 300);
        }

        // Add smooth transitions for navigation
        document.querySelectorAll('.nav-links a').forEach(link => {
            link.addEventListener('click', (e) => {
                if (!link.classList.contains('active')) {
                    e.preventDefault();
                    const href = link.getAttribute('href');
                    document.body.style.animation = 'fadeOut 0.3s ease-out forwards';
                    setTimeout(() => {
                        window.location.href = href;
                    }, 300);
                }
            });
        });

        // Form validation
        const inputs = document.querySelectorAll('input, select');
        inputs.forEach(input => {
            input.addEventListener('change', () => {
                if (input.validity.valid) {
                    input.classList.remove('invalid');
                } else {
                    input.classList.add('invalid');
                }
            });
        });

        // Farmer Grading Logic
        const gradingInputs = [
            'soilType',
            'waterAccess',
            'fertilizerUsage',
            'pestManagement',
            'cropRotation'
        ];

        function calculateGrade() {
            const values = {
                soilType: document.getElementById('soilType').value,
                waterAccess: document.getElementById('waterAccess').value,
                fertilizerUsage: document.getElementById('fertilizerUsage').value,
                pestManagement: document.getElementById('pestManagement').value,
                cropRotation: document.getElementById('cropRotation').value
            };

            // Check if all fields are filled
            if (Object.values(values).some(value => !value)) {
                return;
            }

            // Count optimal factors
            let optimalCount = 0;
            if (values.soilType === 'loam') optimalCount++;
            if (values.waterAccess === 'regular') optimalCount++;
            if (values.fertilizerUsage === 'organic') optimalCount++;
            if (values.pestManagement === 'organic') optimalCount++;
            if (values.cropRotation === 'yes') optimalCount++;

            // Determine badge
            let badge = {
                color: '',
                title: '',
                description: '',
                icon: ''
            };

            if (optimalCount === 5) {
                badge = {
                    color: 'blue',
                    title: 'Blue Badge',
                    description: 'Excellent! All factors are optimal. You are following the best farming practices.',
                    icon: 'üèÜ'
                };
            } else if (optimalCount >= 3) {
                badge = {
                    color: 'green',
                    title: 'Green Badge',
                    description: 'Good! Most factors are optimal. Keep working on improving the remaining factors.',
                    icon: 'üå±'
                };
            } else if (optimalCount === 2) {
                badge = {
                    color: 'black',
                    title: 'Black Badge',
                    description: 'Fair. Some factors need improvement. Consider adopting more sustainable practices.',
                    icon: '‚ö´'
                };
            } else {
                badge = {
                    color: 'red',
                    title: 'Red Badge',
                    description: 'Needs improvement. Most factors need attention. Consider consulting with agricultural experts.',
                    icon: '‚ö†Ô∏è'
                };
            }

            // Update UI
            const resultDiv = document.getElementById('gradingResult');
            const badgeIcon = document.getElementById('badgeIcon');
            const badgeTitle = document.getElementById('badgeTitle');
            const badgeDescription = document.getElementById('badgeDescription');

            badgeIcon.className = `badge-icon badge-${badge.color}`;
            badgeIcon.textContent = badge.icon;
            badgeTitle.textContent = badge.title;
            badgeDescription.textContent = badge.description;
            resultDiv.style.display = 'block';
        }

        // Add event listeners for grading inputs
        gradingInputs.forEach(inputId => {
            const input = document.getElementById(inputId);
            input.addEventListener('change', calculateGrade);
        });

        // Calculate grade on page load if all inputs are filled
        document.addEventListener('DOMContentLoaded', () => {
            const allFilled = gradingInputs.every(inputId => {
                const input = document.getElementById(inputId);
                return input && input.value;
            });
            if (allFilled) {
                calculateGrade();
            }
        });
    </script>
    <script src="js/crop-selection.js"></script>
</body>
</html> 